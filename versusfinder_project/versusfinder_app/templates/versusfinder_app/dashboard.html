{% extends 'versusfinder_app/base.html' %}

{% block title %}DashBoard{% endblock %}

{% block content %}
    <h1>Dashboard</h1>
    <hr>
    <div>
        <table class="table">
            <tr>
                <td id="match_incoming">
                    <div>

                    </div>
                </td>
                <td id="old_matchs">
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="..." alt="First slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="..." alt="Second slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="..." alt="Third slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                           data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                           data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </td>
                <td id="piechart">
                    <div>
                        <canvas id="stats_charts"></canvas>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <a href="#">Nouvelle disponiblit√©</a>
    </div>

    <div id="calendar">

    </div>

    <script>
        var ctx = document.getElementById("stats_charts").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ["Win", "Lose"],
                datasets: [{
                    backgroundColor: [
                        "#00FF00",
                        "#FF0000"
                    ],
                    data: [{% for stat in user_stats %}{{ stat }},{% endfor %}]
                }]
            }
        });

        $('#calendar').fullCalendar({
            defaultDate: '{{ today }}',
            defaultView: 'agendaWeek',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaWeek,agendaDay'
            },
            events: [
                {% for timetable in user_timetable %}
                    {
                        title: 'SmashBros',
                        start: '{{ timetable.getDateBeginFormated }}',
                        end: '{{ timetable.getDateEndFormated}}',
                        rendering: 'background'
                    },
                {% endfor %}
                {% for match in user_matchs %}
                    {
                        title: '{{ match.user_profile_one.username }} VS {{ match.user_profile_two.username }}',
                        start: '{{ match.timetable.getDateBeginFormated }}',
                        end: '{{ match.timetable.getDateEndFormated}}',
                        rendering: 'background'
                    },
                {% endfor %}
            ]
        });
    </script>

{% endblock %}