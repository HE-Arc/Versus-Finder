{% extends 'versusfinder_app/base.html' %}

{% block title %}GamePage{% endblock %}

{% block content %}
    Hi ???, vous trouverez ??? !
    <div>
        <a href="{% url 'match.search' user_id=user_id gameprofile_id=gameprofile.id %}">Rechercher un adversaire !</a>
    </div>
    <div>
        <p>Les matchs Ã  venir</p>
    </div>

    <div>
        {% for match in matchs %}
            <p>
                <a href="{% url 'match.show' user_id=user_id gameprofile_id=gameprofile.id match_id=match.id %}">Match {{ match.id }}</a>
            </p>
            <p>Joueur 1 : {{ match.user_profile_one.username }}</p>
            {% for char in match.user_profile_one.banlist.all %}
                <p>Character ban : {{ char }}</p>
            {% empty %}
                Aucun ban!
            {% endfor %}
            <p>Joueur 2 : {{ match.user_profile_two.username }}</p>
        {% endfor %}
    </div>

    <div id="calendar">

    </div>


    <script>
        $('#calendar').fullCalendar({
            plugins: ['interaction', 'dayGrid', 'timeGrid'],
            navLinks: true,
            defaultView: 'agendaWeek',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
  navLinkDayClick: function(date, jsEvent) {
    console.log('day', date.toISOString());
    console.log('coords', jsEvent.pageX, jsEvent.pageY);
  },
            events: [
                {% for match in matchs %}
                    {
                        title: '{{ match.id }}',
                        start: '{{ match.timetable.getDateBeginFormated }}',
                        end: '{{ match.timetable.getDateEndFormated}}',
                        rendering: 'background',
                        url: '{% url 'match.show' user_id=user_id gameprofile_id=gameprofile.id match_id=match.id %}'
                    },

                {% endfor %}

        ]
        })
        ;
    </script>

{% endblock %}