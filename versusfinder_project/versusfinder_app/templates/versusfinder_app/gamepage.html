{% extends 'versusfinder_app/base.html' %}

{% block title %}GamePage{% endblock %}

{% block content %}
    <h1 class="display-1">Super Smash Bros Ultimate</h1>
    <div>
        <a class="btn btn-primary btn-lg btn-block"
           href="{% url 'match.search' user_id=user_id gameprofile_id=gameprofile.id %}">Rechercher un adversaire !</a>
    </div>
    <div>
        <p>Les matchs Ã  venir</p>
    </div>

    <div>
        {% for match in matchs %}
            <p>
                <a href="{% url 'match.show' user_id=user_id gameprofile_id=gameprofile.id match_id=match.id %}">Match {{ match.id }}</a>
            </p>
            <p>Joueur 1 : {{ match.user_profile_one.username }}</p>
            {% for char in match.user_profile_one.banlist.all %}
                <p>Character ban : {{ char }}</p>
            {% empty %}
                Aucun ban!
            {% endfor %}
            <p>Joueur 2 : {{ match.user_profile_two.username }}</p>
        {% endfor %}
    </div>

    <div id="calendar">

    </div>


    <script>
        $('#calendar').fullCalendar({
            defaultDate: '2019-03-14',
            defaultView: 'agendaWeek',
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaWeek,agendaDay'
            },
            events: [
                {% for match in matchs %}
                    {
                        title: 'My Event',
                        start: '{{ match.timetable.getDateBeginFormated }}',
                        end: '{{ match.timetable.getDateEndFormated}}',
                        rendering: 'background'
                    },
                {% endfor %}

            ]
        });
    </script>

{% endblock %}